<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="a399afc6-6ad5-4245-8b18-8603735f0eab" activeEnvironment="Default" name="REST Project 2" resourceRoot="" soapui-version="5.3.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="9219aaeb-71fa-4d58-b881-e239282d451a" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://arunas-stonis-test.herokuapp.com" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://arunas-stonis-test.herokuapp.com</con:endpoint></con:endpoints><con:resource name="Authentication" path="/api/authentication" id="f247b354-25c2-4759-ab11-93c8a0d82971"><con:settings/><con:parameters><con:parameter><con:name>j_username</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>j_password</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>remember-me</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>submit</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Authentication 1" id="11063f2f-9509-45fc-93c6-fff60e9879ca" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>403 401 404</con:status><con:params/><con:element xmlns:aut="https://arunas-stonis-test.herokuapp.com/api/authentication">aut:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>text/xml</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/x-www-form-urlencoded</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Athentication" id="574cba7a-9cff-4d16-9502-cb504467a52e" mediaType="application/x-www-form-urlencoded" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="JSESSIONID=xC8bq9ZwWGkKyWxbP6SwLf2f6-e06_heGPCrZQB8; XSRF-TOKEN=9bdcc9ee-ba4e-44b7-ac5b-9d1d4d44d92e"/>
  &lt;con:entry key="X-XSRF-TOKEN" value="9bdcc9ee-ba4e-44b7-ac5b-9d1d4d44d92e"/>
&lt;/xml-fragment></con:setting><con:setting id="RecordRequestRepresentations">false</con:setting></con:settings><con:endpoint>https://arunas-stonis-test.herokuapp.com</con:endpoint><con:request/><con:originalUri>https://arunas-stonis-test.herokuapp.com/api/authentication</con:originalUri><con:credentials><con:username/><con:password/><con:domain>herokuapp.com</con:domain><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>false</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="remember-me" value="true"/>
  <con:entry key="submit" value="Login"/>
  <con:entry key="j_password" value="user"/>
  <con:entry key="j_username" value="user"/>
</con:parameters><con:parameterOrder><con:entry>j_username</con:entry><con:entry>j_password</con:entry><con:entry>remember-me</con:entry><con:entry>submit</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="account" path="/api/account" id="64df60ad-39d1-4507-b0bc-4bdc23d86c78"><con:settings/><con:parameters/><con:method name="Method 1" id="112b1239-9359-4669-84f1-26733dafd1f5" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:acc="https://arunas-stonis-test.herokuapp.com/api/account">acc:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:acc="https://arunas-stonis-test.herokuapp.com/api/account">acc:Response</con:element></con:representation><con:request name="Request 1" id="7ec73bd8-4592-4328-8e4b-f90f05cb6542" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="JSESSIONID=j0sLjQ9rrlPPQAvqPA0Ay7_XjhB5JG2QuDC573VI; XSRF-TOKEN=73c39f80-73f2-49cc-a88e-d0324fa73723"/>
  &lt;con:entry key="X-XSRF-TOKEN" value="73c39f80-73f2-49cc-a88e-d0324fa73723"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>https://arunas-stonis-test.herokuapp.com</con:endpoint><con:request/><con:originalUri>https://arunas-stonis-test.herokuapp.com/api/account</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="" id="fea45398-9979-4a51-8ccd-bab1de065971"><con:settings/><con:parameters/><con:method name="Method 1" id="728de1ed-83ba-441c-9297-9f582562e666" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>404</con:status><con:params/><con:element xmlns:arun="https://arunas-stonis-test.herokuapp.com/">arun:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>message/http</con:mediaType><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="2f97ae2a-4f44-458a-8715-e3e11dab3c88" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-XSRF-Token" value="Fetch" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://arunas-stonis-test.herokuapp.com</con:endpoint><con:request/><con:originalUri>https://arunas-stonis-test.herokuapp.com/</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="d8a9de86-94c6-47a3-abd2-3dfd3fb95912" name="TestSuite 1"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="b99f1f74-3718-4b4a-bbad-6fe662ab0746" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Authentication" searchProperties="true"><con:settings/><con:testStep type="properties" name="Properties" id="2e880ff4-d786-49d1-89eb-ba5524b8b611"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>CSRF</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="GetCSRF" id="4216c86a-cc5d-46ea-b8e9-178b59f48573"><con:settings/><con:config service="https://arunas-stonis-test.herokuapp.com" resourcePath="" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetCSRF" id="2f97ae2a-4f44-458a-8715-e3e11dab3c88" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="X-XSRF-Token" value="Fetch" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://arunas-stonis-test.herokuapp.com</con:endpoint><con:request/><con:originalUri>https://arunas-stonis-test.herokuapp.com/</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="SetCRSF property" id="8cd73c68-fcb9-48c1-bda8-d0db948fa1f0"><con:settings/><con:config><script>def headerValue = testRunner.testCase.getTestStepByName("GetCSRF").httpRequest.response.responseHeaders["Set-Cookie"];

log.info( headerValue[0] );

testRunner.testCase.setPropertyValue( "CSRF", headerValue[0] );</script></con:config></con:testStep><con:testStep type="restrequest" name="Authenticate" id="73d937cc-87bd-43b3-ad1d-d11501c7406e"><con:settings/><con:config service="https://arunas-stonis-test.herokuapp.com" resourcePath="/api/authentication" methodName="Authentication 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Authenticate" id="574cba7a-9cff-4d16-9502-cb504467a52e" mediaType="application/x-www-form-urlencoded" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="XSRF-TOKEN=db624b95-4d96-4d7e-8d67-c80e3c5aba74"/>
  &lt;con:entry key="X-XSRF-TOKEN" value="db624b95-4d96-4d7e-8d67-c80e3c5aba74"/>
&lt;/xml-fragment></con:setting><con:setting id="RecordRequestRepresentations">false</con:setting></con:settings><con:endpoint>https://arunas-stonis-test.herokuapp.com</con:endpoint><con:request/><con:originalUri>https://arunas-stonis-test.herokuapp.com/api/authentication</con:originalUri><con:credentials><con:username/><con:password/><con:domain>herokuapp.com</con:domain><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>false</con:preemptive><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="remember-me" value="true"/>
  <con:entry key="submit" value="Login"/>
  <con:entry key="j_password" value="user"/>
  <con:entry key="j_username" value="user"/>
</con:parameters><con:parameterOrder><con:entry>j_username</con:entry><con:entry>j_password</con:entry><con:entry>remember-me</con:entry><con:entry>submit</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="properties" name="Getting cookies" id="a7784b0e-7e97-4d0e-9431-e8855287f6a0"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>JSESSION</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Setting cookie" id="ecac63dd-f49e-4456-9207-ab1a6ea99c00"><con:settings/><con:config><script>def val = testRunner.testCase.testSteps['Authenticate'].testRequest.response.getResponseHeaders()
log.info("---- all headers -------")
val.each() { hdrs ->
    log.info hdrs
}
log.info("---- cookie jar contents -------")
def cjar = val.get("Set-Cookie")[0]
log.info ( "Cookie Jar: " + cjar )
def cookies = cjar.tokenize("\\;")
log.info("---- cookies -------")
cookies.each() { cookie ->
    log.info "Cookie: " + cookie
}
log.info("---- separated -------")
cookies.each() { cookie ->
    def pair = cookie.tokenize("\\=")
    log.info( "[- Key: " + pair[0] + ", Val: " + pair[1] + "-]" )
}
log.info("---- end -------")</script></con:config></con:testStep><con:testStep type="restrequest" name="Account" id="a831167c-c978-4f6e-8794-587e28df3c4a"><con:settings/><con:config service="https://arunas-stonis-test.herokuapp.com" methodName="Method 1" resourcePath="/api/account" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Account" id="3062b87d-7378-4bc3-93f2-32bbe6fece97" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://arunas-stonis-test.herokuapp.com</con:endpoint><con:request/><con:originalUri>https://arunas-stonis-test.herokuapp.com/api/account</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="dc7ab245-3b4c-42a0-9f53-2c7fea36f4fa"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>do</con:name><con:sourceType>CSRF</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>Account</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>CSRF</con:name><con:value>XSRF-TOKEN=689c828f-f262-4966-af53-253c03f18713; path=/; secure</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:restMockService id="c083b625-ba0a-4a4e-8e7c-4c4811d364c3" port="8080" path="/" host="Stoniai-Laptop"><con:settings/><con:properties/></con:restMockService><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/></con:soapui-project>